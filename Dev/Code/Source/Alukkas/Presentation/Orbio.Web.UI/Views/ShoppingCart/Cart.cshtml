@model List<Orbio.Web.UI.Models.Orders.ShoppingCartItemModels>
<section class="main_shop_cart">
    <div class="container">
        <ol class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li class="active">Shopping cart</li>
        </ol>


        <div class="shopping_cart">
            <h1>MY SHOPPING CART</h1>
            @using (Html.BeginForm("Cart", "ShoppingCart", FormMethod.Post, new { Id = "formCartProduct" }))
            {
                <table cellpadding="0" cellspacing="0" width="100%" class="shopping_table">
                    <tr>
                        <th width="150" class="item_table">Item</th>
                        <th width="30%"></th>
                        <th>Remove</th>
                        <th>Quantity</th>
                        <th>Item Price</th>
                        <th>Total Price</th>
                    </tr>
                    @{
                var count = 0;

                foreach (var scpd in this.Model)
                {
                    var scpdr = string.Format("items[{0}].IsRemove", count);
                    var scpdqu = string.Format("items[{0}].SelectedQuantity", count);
                    var scpdId = string.Format("items[{0}].Id", count);
                    var scpdTotalprice = string.Format("items[{0}].Totalprice", count);
                    var scpdRemove = string.Format("items[{0}].IsRemove", count);
                    var scpdQuantity = string.Format("items[{0}].SelectedQuantity", count);
                    var scpdcartid = string.Format("items[{0}].CartId", count);
                    <tr>
                        <td><img src="@scpd.ProductPictures[count].ImageUrl"></td>
                        <td>@scpd.Name </td>
                        <td>@Html.CheckBox(scpdr, scpd.IsRemove)@*<input type="checkbox" name="Remove" value="@scpd.CartId" />*@</td>
                        <td>
                            @{
                    var qtyList = new List<object>();
                    if (scpd.AllowedQuantities.Count > 0)
                    {
                        foreach (var qty in scpd.AllowedQuantities)
                        {
                            qtyList.Add(new { Text = qty.ToString(), Value = qty.ToString() });
                        }
                    }
                    else
                    {
                        for (var i = scpd.OrderMinimumQuantity; i <= scpd.OrderMaximumQuantity; i++)
                        {
                            qtyList.Add(new { Text = i.ToString(), Value = i.ToString() });
                        }
                    }
                    //var selectedValue = qtyList.Where(qty => qty == scpd.SelectedQuantity).FirstOrDefault();
                    //if (selectedValue == null)
                    //{
                    //    selectedValue = qtyList.FirstOrDefault();
                    //}
                    var qtySelectList = new SelectList(qtyList, "Value", "Text", scpd.SelectedQuantity);
                            }

                            @Html.DropDownList(scpdqu, (IEnumerable<SelectListItem>)qtySelectList)
                            @Html.Hidden(scpdRemove, scpd.IsRemove)  @Html.Hidden(scpdQuantity, scpd.SelectedQuantity) @Html.Hidden(scpdcartid, scpd.CartId)
                        <td>@scpd.CurrencyCode.@scpd.ProductPrice.Price @Html.Hidden(scpdId, scpd.Id)  @Html.Hidden(scpdTotalprice, scpd.Totalprice)</td>
                        <td>@scpd.CurrencyCode.@scpd.Totalprice @Html.Hidden(scpd.Totalprice)</td>
                    </tr>
                    count++;
                }
                    }
                </table>


                <div class="shop_promation">
                    <ul>
                        <li class="promat">ENTER A PROMOTIONAL CODE</li>
                        <li><input type="text" class=""></li>
                        <li><input type="submit" class="green_butt" value="update cart"></li>
                    </ul>
                </div>
            }
            <div class="shop_status">
                <div class="row">
                    <div class="col-sm-8">
                        <div class="check_deliver">
                            <p>Check Delivery Information</p>
                            <input type="text" placeholder="Enter your pincode" class="pincode">
                            <input type="submit" value="Check" class="blue_butt">
                        </div>

                        <div class="shop_payment">
                            <p>Payment Methods</p>

                            <ul class="foot_menu clearfix">
                                <li><a href="" class="visa_met"></a></li>
                                <li><a href="" class="discover_met"></a></li>
                                <li><a href="" class="american_met"></a></li>
                                <li><a href="" class="master_met"></a></li>
                            </ul>

                        </div>
                    </div>
                    <div class="col-sm-4">

                        <div class="cart_total">
                            <dl class="dl-horizontal">
                                <dt>Cart Sub Total</dt>
                                <dd>@ViewBag.Currencycode.@ViewBag.subtotal</dd>
                                <dt>Shipping Charges</dt>
                                <dd>0</dd>
                                <dt>Promotional Discounts</dt>
                                <dd>0</dd>
                                <dt>Estimated Tax</dt>
                                <dd>0</dd>
                                <dt class="cart_total">Total</dt>
                                <dd class="cart_total">@ViewBag.Currencycode.@ViewBag.subtotal</dd>
                            </dl>
                        </div>

                    </div>

                </div>

            </div>


        </div>





        <div class="shop_stat_butt">
            <div class="row">
                <div class="col-sm-8">
                    <input type="submit" class="continue_shop" value="CONTINUE SHOPPING">
                </div>

                <div class="col-sm-4">
                    <a href="@Url.Action("Address","CheckOut")"><input type="submit" class="continue_check" value="PROCEED TO CHECKOUT"></a>
                </div>
            </div>
        </div>




    </div>
</section>
